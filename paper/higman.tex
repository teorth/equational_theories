\section{Higman--Neumann laws}\label{higman-neumann}

\subsection{Describing groups as magmas}

The ETP is focused exclusively on magmas, which only feature a single (binary) operation.  Many mathematical structures traditionally defined using several operations can nevertheless be fully described as magmas with a well-chosen combined operation, from which the whole structure can be reconstructed.  The first example is how Boolean algebras defined in terms of three operations $(\land,\lor,\lnot)$ were equivalently described in 1913 in terms of the Sheffer stroke $x\op y\coloneqq \lnot(x\land y)$~\cite{sheffer}.  Once such a single operation is found, a separate endeavor is to determine which laws it must satisfy to get the desired structure, and, in favorable cases find a single law that encapsulates the whole structure, or even find all equivalent laws of minimum order.  The earliest such example is Tarski's description of abelian groups in terms of subtraction $x\op y\coloneqq x+(-y)$, subject to a single axiom $\x \formaleq \y \op (\z \op (\x \op (\y \op \z)))$ \eqref{eq543}, found in 1938~\cite{Tarski1938}.  It then took three decades~\cite{higman-neumann,Sholander01021959,Padmanabhan_1969} to sort out the full equivalence class of $\Eq{543}$ among laws of order~$4$.  For Boolean algebras, a minimum-order single-law description was only found in~\cite{mccune_et_al}, nine decades after Sheffer's work.

We plan to report elsewhere on other examples such as modules over Eisenstein integers $\mathbb{Z}[\omega_3]$ or Gaussian integers $\mathbb{Z}[\omega_4]$, with $\omega_k$~a primitive $k$th root of unity, which can be described by the operation $x \op y \coloneqq x + \omega_k y$ subject to the order-$6$ laws $\Eq{85914}$ and~$\Eq{86082}$, respectively.

Here, we describe the case of groups.  The binary operation~$*$, unary operation~$(\cdot )^{-1}$, and nullary operation~$e$ (identity element) can be repackaged into a single division operation $x \op y \coloneqq x*y^{-1}$, from which the original operations are easily reconstructed: for instance $x*y=x\op((y\op y)\op y)$.  A group equipped with division, called a Ward quasigroup, is a magma $(G, \op)$ satisfying the unipotence law $\x \op \x \formaleq \y \op \y$ \eqref{eq40}, the right-unit squares law $\x \formaleq \x \op (\y \op \y)$ \eqref{eq11}, and a version of the associativity law dubbed the half-group law, $\x \op \y \formaleq (\x \op \z) \op (\y \op \z)$ \eqref{eq3737}, from which group axioms are easily derived.
These three laws are equivalent to a single law $\E_{\mathrm{HN}}\coloneqq \Eq{42323216}$ of order~$8$, found by Higman and Neumann~\cite{higman-neumann},
\[
\E_{\mathrm{HN}} \colon \x \formaleq \y \op \Bigl(\bigl(((\y \op \y) \op \x) \op \z\bigr) \op \bigl(((\y \op \y) \op \y) \op \z\bigr)\Bigr) .
\]
McCune found two more laws equivalent to this one and of the same order \cite{mccune1993single}, $\Eq{42302852}$ and $\Eq{147976245}$.  A natural question is to find all characterizations of Ward quasigroups (groups equipped with division) with minimum order.
Throughout our exploration, we used two criteria: the law must be satisfied by group division, and must fail for magmas that are not Ward quasigroups.

\subsection{Basic constraints}

There are $\num{298012537}$ laws of order up to~$8$, and running an ATP on all of them is too slow, so one needs efficient ways to filter them beforehand.  Let us begin with restrictions on the shape of any law equivalent to~$\E_{\mathrm{HN}}$.
The law must take the form $\x\formaleq\dots$ as otherwise it would be satisfied by the constant operation on any set.
The law must be satisfied when evaluated with all variables set to the same element (say,~$1$) in the Ward quasigroup $\mathbb{Z}$ equipped with subtraction.  In particular the law must have even order.
This reduces from $\num{3470}$ shapes of order up to~$8$, down to just $548$~shapes.

Next come some restrictions on the variables.
The right-hand side must not start nor end with the variable~$\x$, as otherwise the projection operations $x\op y \coloneqq x$, $x\op y\coloneqq y$ respectively would satisfy the law.
The law must have at least three variables: otherwise it is satisfied by division in any diassociative loop (such as a Moufang loop), namely a quasigroup with identity element in which every $2$-generated submagma is a group.
Each variable must appear an even number of times, so that the law holds in Boolean groups (abelian groups of exponent~$2$).
These basic constraints leave $54$, $\num{9000}$, and $\num{1841910}$~candidate laws of orders $4$, $6$, and~$8$, respectively, which can be efficiently enumerated since the conditions so far constrain separately the shape and list of variables (refer to Appendix \ref{numbering-app} for the relevant definitions).

Imposing further that the law is satisfied by division in a free non-abelian group (with one generator per variable) reduces these numbers of laws to $0$, $59$, and $\num{5692}$ at these same orders.  All of the laws coming out of these filters are consequences of~$\E_{\mathrm{HN}}$; accordingly, one must determine which of these candidates imply said law.

\subsection{Using automated theorem provers}

We repeatedly whittled down the list of candidates by accumulating a collection of finite countermodels, namely magmas that satisfy a candidate law while violating one of the laws $\Eq{11}$, $\Eq{40}$ and~$\Eq{3737}$ characterizing Ward quasigroups.  Automated searches of small magmas (of size up to~$8$) with \emph{Mace4} or \emph{Vampire} gave many countermodels (of which $12$ are enough).  A second source was that of linear models $x \op y \coloneqq ax+by$ on $\mathbb{Z}/n\mathbb{Z}$ with $(a,b)\neq(1,n-1)$: the largest one we used is $x \op y \coloneqq 261x + 33y \bmod 307$ to rule out the candidate law $\Eq{68185620}$, $\x \formaleq (\y \op \y) \op (\y \op ((\x \op (\z \op \y)) \op ((\x \op \x) \op \z)))$.  Finally, we introduced some models that are ``almost'' Ward quasigroups: the $7$-element smallest non-associative inverse loop (equipped with division), the $10$-element smallest non-associative Steiner loop (commutative loop in which divisions coincide with multiplication), and the $16$-element Moufang loop of unit octonions over~$\mathbb{Z}$.

These steps eliminated all candidates of order less than~$8$,\footnote{In particular we recover the inexistence of laws of order~$6$ characterizing Ward quasigroups, already announced by McCune and Kinyon at \url{https://www.cs.unm.edu/~mccune/projects/gtsax/\#division}.} and left only $213$ laws of order~$8$ that could be equivalent to~$\E_{\mathrm{HN}}$.  These laws come in $31$ families consisting of a ``parent'' $5$-variable law and some specializations with pairs of variables being identified.  The lowest-numbered law in this list is McCune's law
\[
\x \formaleq \y \op \Bigl(\bigl(((\x \op \x) \op \x) \op \z\bigr) \op \bigl(((\x \op \x) \op \y) \op \z\bigr)\Bigr) \ \eqref{eq42302852},
\]
which is in the same family as the Higman--Neumann law.  Another common feature is that all $213$ candidate laws include at least one subexpression of the form $v \op v$ for some variable~$v$.

For $179$ candidate laws~$\E$, we showed the implication $\E\models\E_{\mathrm{HN}}$ using the ATP \emph{Prover9}.  For equations of this order, the ATP computation times increase significantly compared to order-$4$ laws, with some proofs taking $20$~times longer than checking with \emph{Prover9} all $\num{8178279}$ positive implications of the main project.  The choices of parameters bounding the ATP search (such as the parameter \texttt{max\_weight} limiting clause complexity in \emph{Prover9}) were particularly crucial, with different values being optimal in different proofs.  Another important speed-up was obtained by seeking proofs of a simple property such as $\Eq{11}$, $\Eq{40}$, $\Eq{3737}$, or injectivity/surjectivity of left or right multiplications, then seeking proofs that the candidate law together with that property implies some other property, and so on, until proving all three laws characterizing Ward quasigroups.  The reverse approach also proved useful, namely finding which property would allow the proof to succeed, then seeking a proof of that property from the candidate law.  The law $\Eq{102744082}$ was a particularly difficult instance: together with injectivity of right multiplications it easily implies the Higman--Neumann law, but the proof that $\Eq{102744082}$ does imply injectivity took several hours to obtain in a sweeping search with general parameters; an optimized choice of \emph{Prover9} options trims this time down to $0.2$~seconds.  The two characterizations $\Eq{42302946}$ and~$\Eq{89176740}$ of division in groups deserve particular mention for being nicely expressed in terms of the right-cubing map $C(x) \coloneqq (x \op x) \op x$:
\[
  \x \formaleq \y \op ((C(\x) \op \z) \op (C(\y) \op \z)) , \qquad
  \x \formaleq C(\y) \op ((C(\x) \op \z) \op (\y \op \z)) .
\]

Among the $34$ remaining candidates, we showed the finite implication $\E\modelsfin\E_{\mathrm{HN}}$ for $21$~laws~$\E$, which means that the law $\E$ characterizes Ward quasigroups among finite magmas.  Let us illustrate the proof technique for $\x \formaleq (\y \op \y) \op (\y \op ((\x \op \z) \op (((\x \op \x) \op \y) \op \z)))$ \eqref{eq67953597}.  In a finite magma, one gets $x = L_{y\op y} \circ L_y \circ f_{y,z}(x)$ in terms of the function $f_{y,z}\colon x \mapsto (x\op z) \op (((x \op x) \op y) \op z)$.  Finiteness implies that the composition of several functions can only be a bijection if all of them are bijections, thus left multiplications are bijective.  By selecting $y=L_{x\op x}^{-1}(w)$ one gets that $(x\op z)\op (w\op z)$ equals the $z$-independent expression $L_y^{-1} \circ L_{y\op y}^{-1}(x)$.  Taking $w=x$ yields that the square of $L_x(z)$ is $z$-independent, hence (by surjectivity of~$L_x$) all squares are equal.  A routine ATP run then concludes.
While the resulting proofs of finite implications are relatively short and have been successfully ported to \emph{Lean}, our automated search involved thousands of \emph{Vampire} runs.
Indeed, rather than the condition that a bijective composition implies bijectivity of its constituents, we had to use the more concrete property that injectivity is equivalent to surjectivity for various collections of specific functions $f\colon M\to M$ such as left or right multiplications, cubing, etc.\@, with a brute-force search over which functions to include in a given run.

The remaining $13$~candidates have proven to be quite resistant to both proof and countermodel attacks with a wide range of parameter options, target clauses, additional clauses, and given time (up to 10 hours for each candidate and given experiment).  We have shown with \emph{Prover9} that a model of any of the remaining candidates~$\E$ that has a right-identity element, or that satisfies the right-unit squares law~$\Eq{11}$ or unipotence law~$\Eq{40}$, is a Ward quasigroup.  As such, any putative countermodel to the implication $\E\models\E_{\mathrm{HN}}$ must be far from being a Ward quasigroup, in the sense that it must violate these laws.\footnote{In fact, we find that countermodels must violate many laws satisfied by group division: $\Eq{11}$, $\Eq{40}$, $\Eq{823}$, $\Eq{835}$, $\Eq{842}$, $\Eq{846}$, $\Eq{1049}$, $\Eq{1637}$, $\Eq{1673}$, $\Eq{1718}$, $\Eq{1835}$, $\Eq{1876}$, $\Eq{3282}$, $\Eq{3323}$, $\Eq{3662}$, $\Eq{3665}$, $\Eq{3677}$, $\Eq{3684}$, $\Eq{3721}$, $\Eq{3729}$, $\Eq{3737}$, $\Eq{3761}$, $\Eq{3823}$, $\Eq{3870}$, $\Eq{3891}$, $\Eq{3943}$, $\Eq{4270}$, $\Eq{4590}$ of order up to~$4$, and many more of higher order, including the associative right division law $\Eq{912704}$, $\x\op(\y\op(\z\op\w)) \formaleq(\x\op(\w\op\z))\op\y$.}  In particular it cannot be a loop; this discards, e.g., the $32$-element loop of unit sedenions over~$\mathbb{Z}$ as a potential countermodel.

In summary, out of the $\num{298012537}$ laws of order up to~$8$, we found $179$ laws characterizing Ward quasigroups, $21$~characterizing them among finite magmas but perhaps not infinite ones, and $13$~candidates for which we have neither a counterexample nor a proof even for finite magmas. No efforts have been made yet to find infinite countermodels with the techniques developed in the main project. The results of this section\footnote{\url{https://github.com/teorth/equational_theories/blob/main/data/Higman-Neumann.json}} have not been formalized in \emph{Lean} yet. More details and further progress on this side project will be published elsewhere.
