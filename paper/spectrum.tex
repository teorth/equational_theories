\section{Spectrum of equational laws}\label{spectrum-sec}

Given an equational law~$\Eq{n}$, one can ask for its spectrum, namely the set of cardinalities of its finite models.\footnote{The infinite spectrum is uninteresting (assuming the axiom of choice).  Let us show that if $\Eq{n}$ is not equivalent to the singleton law $\Eq{2}$ then it has models of all infinite cardinalities~$\kappa$.  The free magma on $\Eq{n}$ with $\kappa$ generators is such a model.  Indeed, the generators are distinct in this magma (otherwise $\Eq{n}$ would imply $\Eq{2}$) so its cardinal $\mu$ is at least $\kappa$.  Conversely, $\mu\leq\sum_T\kappa^{|T|}$ where the range sums over finite binary trees, and this sum is bounded above by $\aleph_0\cdot\kappa=\kappa$.}
The spectrum $\operatorname{Spec}(\Eq{n})$ is a multiplicative subset of $\mathbb{Z}_{>0}$ since the direct product of models is a model.
We focus here on the most basic question, that is, which laws (of order up to~$4$) have spectrum equal to $\mathbb{Z}_{>0}$?

Several extensions will be described in a separate publication: determining the spectrum and not only whether it is full; the spectrum of simple magmas or (sub)directly irreducible magmas; tracking multiplicity, namely counting (or bounding asymptotically) how many finite magmas exist of each size in the spectrum; this is referred to as the \emph{fine spectrum} in \cite{taylor}.  These detailed considerations reveal profound differences in how much an equational law constrains the magma operation, and may help organize the implication graph into different families.

An ATP run shows that $\num{1558}$ laws of order up to~$4$ have no model of size~$2$ and $\num{62}$ have a model of size~$2$ but none of size~$3$.  Pushing the search to higher model sizes does not resolve the question for any of the remaining $\num{3074}$ laws.  As we explain next, all of these laws actually have full spectrum.\footnote{Further investigations show that the lowest-numbered law with models of sizes $2$ and $3$ but not full spectrum is $\Eq{80887}$, namely $\x \formaleq \y \op (\y \op (\y \op (((\y \op \y) \op \x) \op \y)))$, of order~$6$.}


Our main tool by far to show that a law has full spectrum is to consider the carrier set $\mathbb{Z}/n\mathbb{Z}$, with a linear operation $x\op y = ax+by$ with $a,b\in\{-1,0,1\}$.  If the law holds for some choice of $a,b$ then the law has full spectrum.
\begin{itemize}
\item For $(a,b)=(0,0)$ the operation is the constant operation, which is a model of $\Eq{1}$ and any law whose sides both have positive order.  Equivalently, these laws are consequences of the constant law $\Eq{46}$.
\item For $(a,b)=(1,0)$ the operation is a projection, which is a model of any law whose sides start with the same first variable, equivalently the consequences of $\Eq{4}$.  (The choice $(a,b)=(-1,0)$ is a model of fewer laws hence is not useful.)  Likewise $(a,b)=(0,1)$ shows that laws whose sides end with the same last variable (consequences of $\Eq{5}$) have full spectrum.
\item For $(a,b)=(1,-1)$ the operation is abelian group subtraction, characterized by Tarski's axiom $\Eq{543}$, which shows that any law implied by $\Eq{543}$ has full spectrum.  Likewise, backwards subtraction $(a,b)=(-1,1)$ provides models for $\Eq{1090}$ (equivalent to the dual of $\Eq{543}$) and its consequences.
\item The operation for $(a,b)=(1,1)$ is abelian group addition, which is useless as any law it satisfies for all~$n$ is also satisfied by the constant operation $(a,b)=(0,0)$.
\item Finally, the operation $(a,b)=(-1,-1)$ is a model of some more laws, such as the semi-symmetric quasigroup law $\Eq{14}$ and totally symmetric quasigroup law $\Eq{492}$.
\end{itemize}
These considerations account for $\num{3068}$ laws, and there remain three dual pairs of laws to treat.  This is done through ad hoc models: a piecewise linear model for $\Eq{1682}$ and its dual, and models whose operation table is mostly constant for the remaining laws $\Eq{1482}$, $\Eq{1523}$, and their duals.

Since a law implied by a full spectrum law has full spectrum itself, the implication graph reduces significantly the number of laws for which it is useful to formalize the full spectrum property.  Accounting for duality and implications, we found it sufficient to formalize the proof that $32$ laws have no magma of size~$2$ or none of size~$3$, and the explicit construction of magmas of all finite sizes for the $7$~laws $\Eq{4}$, $\Eq{41}$, $\Eq{492}$, $\Eq{543}$, $\Eq{1482}$, $\Eq{1523}$, and $\Eq{1682}$.  In conclusion, we prove that $\num{3074}$ laws ($65\%$) have full spectrum $\operatorname{Spec}(\Eq{n})=\mathbb{Z}_{>0}$ and $\num{1620}$ ($35\%$) do not (including $\num{1496}$ laws equivalent to $\Eq{2}$).  These percentages remain roughly stable at higher orders, with $60\%$ of laws of order up to $9$ having full spectrum, as will be reported elsewhere.
