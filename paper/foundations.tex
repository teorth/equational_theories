\section{Notation and Mathematical Foundations}

If $M$ is a magma, we define the left and right multiplication operators $L_a, R_a \colon M \to M$ for $a \in M$ by the formula
\begin{equation}\label{left-right}
    L_x y = R_y x \coloneqq x \op y.
\end{equation}
We also define the squaring operator $S \colon M \to M$ by
\begin{equation}\label{square-def}
    Sx \coloneqq x \op x = L_x x = R_x x
\end{equation}
and the (right) cubing operator $C \colon M \to M$ by
\begin{equation}\label{cube-def}
    Cx \coloneqq Sx \op x = R_x^2 x.
\end{equation}

If $X$ is an alphabet, we let $M_X$ denote the free magma generated by $X$, thus an element of $M_X$ is either a letter in $X$, or of the form $w_1 \op w_2$ with $w_1,w_2 \in M_X$.  Every function $f \colon X \to M$ into a magma $M$ extends to a unique homomorphism $\varphi_f \colon M_X \to M$.  Formally, an equational law with some indeterminates in $X$ can be written as $w_1 \formaleq w_2$ for some $w_1, w_2 \in X$; a magma $M$ then obeys this law if and only if $\varphi_f(w_1) = \varphi_f(w_2)$ for all $f \colon X \to M$.

Every magma $M$ has an opposite $M^{\mathrm{op}}$, which has the same carrier but the opposite operation $x \op^{\mathrm{op}} y \coloneqq y \op x$.  A magma $M$ obeys an equational law $E$ if and only if its opposite $M^{\mathrm{op}}$ obeys the dual law $E^*$, defined by reversing the all operations.  For instance, the dual of Equation 327,
\begin{equation}\label{eq327}\tag{E327}
    x \op y = x \op (y \op z),
\end{equation}
is the the law $y \op x = (z \op y) \op x$, which in our numbering system we rewrite as Equation 395,
\begin{equation}\label{eq395}\tag{E395}
    x \op y = (z \op x) \op y.
\end{equation}
We then see that the implication graph has a duality symmetry: given two equational laws $E_1,E_2$, we have $E_1 \vdash E_2$ if and only if $E_1^* \vdash E_2^*$.

\section{Formal Foundations}

\note{TODO: expand this sketch.}

Here we describe the Lean framework used to formalize the project, covering technical issues such as:

\begin{itemize}
    \item Magma operation symbol issues
    \item Syntax (`LawX`) versus semantics (`EquationX`)
    \item "Universe hell" issues
    \item Additional verification (axiom checking, Leanchecker, etc.)
    \item Use of the `conjecture` keyword
    \item Use of namespaces to avoid collisions between contributions. (Note: we messed up with this with FreeMagma! Should have namespaced back end results as well as front end ones.)
    \item Use of Facts command to efficiently handle large numbers of anti-implications at once
\end{itemize}

Upstream contributions:

\begin{itemize}
    \item \href{https://github.com/leanprover-community/mathlib4/pulls?q=is%3Apr+is%3Abody+EquationalTheories+}{Mathlib contributions}
    \item \href{https://github.com/PatrickMassot/leanblueprint/pulls?q=is%3Apr+in%3Abody+EquationalTheories+}{LeanBlueprint contributions}
\end{itemize}
