\chapter{Infinite models}

In this chapter we consider non-implications which are refuted only on infinite models, as those are
more challenging to prove---they can't be proved by directly giving an operation table and checking
which laws it satisfies.

We note some selected laws of order more than $5$, used for such non-implications.

\begin{definition}[Equation 5105]
  \label{eq5105}\uses{magma-def}
  Equation 5105 is the law $0  \formaleq 1 \circ (1 \circ (1 \circ (0 \circ (2 \circ 1))))$ (or the equation $x = y \circ (y \circ (y \circ (x \circ (z \circ y))))$).
\end{definition}

This law of order $5$ was mentioned in \cite{Kisielewicz2}.

\begin{definition}[Equation 28393]
  \label{eq28393}\uses{magma-def}
  Equation 28393 is the law $0  \formaleq  (((0 \circ 0) \circ 0) \circ 1) \circ (0 \circ 2)$ (or the equation $x = (((x \circ x) \circ x) \circ y) \circ (x \circ z)$).
\end{definition}

This law of order $5$ was introduced by Kisielewicz \cite{Kisielewicz}.

\begin{definition}[Equation 374794]
  \lean{Equation374794}\leanok
  \label{eq374794}\uses{magma-def}
  Equation 374794 is the law $0  \formaleq  (((1 \circ 1) \circ 1) \circ 0) \circ ((1 \circ 1) \circ 2)$ (or the equation $x = (((y \circ y) \circ y) \circ x) \circ ((y \circ y) \circ z)$).
\end{definition}

This law of order $6$ was introduced by Kisielewicz \cite{Kisielewicz}.

The singleton or empty magma obeys all equational laws.  One can ask whether an equational law admits nontrivial finite or infinite models.  An \emph{Austin law} is a law which admits infinite models, but no nontrivial finite models.  Austin \cite{austin} established the first such law, namely the order $9$ law
$$ (((1 \circ 1) \circ 1) \circ 0) \circ (((1 \circ 1) \circ ((1 \circ 1) \circ 1)) \circ 2) \formaleq 0.$$
A shorter Austin law of order $6$ was established in \cite{Kisielewicz}:

\begin{theorem}[Kisielewicz's first Austin law]
  \lean{InfModel.Finite.Equation374794_implies_Equation2,InfModel.Equation374794_not_implies_Equation2}\leanok
  \label{kis-thm}\uses{eq374794,eq2}
  Definition \ref{eq374794} is an Austin law.
\end{theorem}

\begin{proof} \leanok Suppose for contradiction that we have a non-trivial model of Definition \ref{eq374794}. Write $y^2 := y \circ y$ and $y^3 := y^2 \circ y$. For any $y,z$, introduce the functions $f_y: x \mapsto y^3 \circ x$ and $g_{yz}: x \mapsto x \circ (y^2 \circ z)$.  Definition \ref{eq374794} says that $g_{yz}$ is a left-inverse of $f_y$, hence by finiteness these are inverses and $g_{yz}$ is independent of $z$. In particular
$$ f(y^3) = g_{yy}(y^3) = g_{yz}(y^3) = f(y^2 \circ z)$$
and hence $y^2 \circ z$ is independent of $z$.  Thus
$$ f_y(x) = (y^2 \circ y) \circ x = (y^2 \circ y^2) \circ x$$
is independent of $x$.  As $f_y$ is invertible, this forces the magma to be trivial, a contradiction.

To construct an infinite magma, take the positive integers $\Z^+$ with the operation $x \circ y$ defined as
\begin{itemize}
  \item $2^x$ if $y=x$;
  \item $3^y$ if $x = 1 \neq y$;
  \item $\min(j,1)$ if $x=3^j$ and $y \neq x$; and
  \item $1$ otherwise.
\end{itemize}
Then $y^2 = 2^y$, $y^3 = 1$, and $y^2 \circ z$ a power of two for all $y, z$, and $(1 \circ x) \circ w = x$ for all $x$ whenever $w$ is a power of two, so Definition \ref{eq374794} is satisfied.
\end{proof}

An even shorter law (order $5$) was obtained by the same author in a followup paper \cite{Kisielewicz2}:

\begin{theorem}[Kisielewicz theoremII]\label{kis-thm2}\uses{eq2} Definition \ref{eq28393} is an Austin law.
\end{theorem}

\begin{proof} Using the $y^2$ and $y^3$ notation as before, the law reads
\begin{equation}\label{kis2-law}
   x = (y^3 \circ x) \circ (y \circ z).
  \end{equation}
In particular, for any $y$, the map $T_y \colon x \mapsto y^3 \circ x$ is injective, hence bijective in a finite model $G$.  In particular we can find a function $f : G \to G$ such that $T_y f(y) = y^3$ for all $y$  Applying \eqref{kis2-law} with $x = f(y)$, we conclude
$$ T_y(y \circ z) = y^3 \circ (y \circ z) = f(y) $$
and thus $y \circ z$ is independent of $z$ by injectivity of $T_y$.  Thus, the left-hand side of \eqref{kis2-law} does not depend on $x$, and so the model is trivial.  This shows there are no non-trivial finite models.

To establish an infinite model, use $\N$ with $x \circ y$ defined by requiring
$$ y \circ y = 2^y; \quad 2^y \circ y = 3^y$$
and
$$ 3^y \circ x = 3^y 5^x$$
for $x \neq 3^y$, and
$$ (3^y 5^x) \circ z = x$$
for $z \neq 3^y 5^x$.  Finally set
$$ 2^{3^y} \circ z = 3^y$$
for $z \neq 3^y, 2^{3^y}$.  All other assignments of $\circ$ may be made arbitrarily. It is then a routine matter to establish \eqref{kis2-law}.
\end{proof}

In that paper a computer search was also used to show that no law of order four or less is an Austin law.

An open question is whether Definition \ref{eq5105} is an Austin law.  We have the following partial result from \cite{Kisielewicz2}:

\begin{theorem}[Equation 5105 has no non-trivial finite models]\lean{InfModel.Finite.Equation5105_implies_Equation2}\leanok\label{5105-nontrivial}\uses{eq5105} Definition \ref{eq5105} has no non-trivial finite models.
\end{theorem}

\begin{proof} \leanok From Definition \ref{eq5105} we see that the map $w \mapsto y \circ w$ is onto, hence injective in a finite model.  Using this injectivity four times in Definition \ref{eq5105}, we see that $z \circ y$ does not depend on $z$, hence the expression
$x \circ (z \circ y)$ does not depend on $x$.  By Definition \ref{eq5105} again, this means that $x$ does not depend on $x$, which is absurd in a non-trivial model.
\end{proof}

We also have such a non-implication involving two laws of order $4$:
\begin{definition}[Equation 3994]
  \label{eq3994}\uses{magma-def}
  Equation 3994 is the law $0 \circ 1 \formaleq (2 \circ (0 \circ 1)) \circ 2$ (or the equation $x \circ y = (z \circ (x \circ y)) \circ z$).
\end{definition}

\begin{definition}[Equation 3588]
  \label{eq3588}\uses{magma-def}
  Equation 3588 is the law $0 \circ 1 \formaleq 2 \circ ((0 \circ 1) \circ 2)$ (or the equation $x \circ y = z \circ ((x \circ y) \circ z)$).
\end{definition}

\begin{theorem}\label{finite_imp_3994_3588_thm}\uses{eq3994,eq3588}
  \lean{InfModel.Finite.Equation3994_implies_Equation3588}\leanok
  All finite magmas which satisfy definition \ref{eq3994} also satisfy definition \ref{eq3588}
\end{theorem}

\begin{proof}\label{finite_imp_3994_3588} \leanok
  For a finite magma $M$, consider the set $S = \{x \circ y | x, y \in M\}$.
  Now $f_z : x \mapsto z \circ x$ and $g_z : x \mapsto x \circ z$.
  They both map $S$ to $S$, and due to the hypothesis $g_z \circ f_z$ is the identity on $S$,
  so because $S$ is finite $f_z$ and $g_z$ must be inverse bijections on it, and therefore
  they commute.
\end{proof}

\begin{theorem}\label{non_imp_3994_3588_thm}
  \lean{InfModel.Equation3994_not_implies_Equation3588}\leanok
  There exists a magma which satisfies \ref{eq3994} and not \ref{e3588}.
\end{theorem}

\begin{proof} \leanok
  Consider $\mathbb{N}$, with $x \circ y$ defined as $x \oplus y$ (bitwise XOR) if $x$ and $y$ are even,
  $y+2$ if only $y$ is even, $x \dot - 2$ if only $x$ is even, and $0$ if both are odd.
  Note that the range of the operation is the set of even naturals.
  Definition \ref{eq3994} is satisfied, because for even $z$ we get $z \oplus (x \circ y) \oplus z = x \circ y$
  and for odd $z$ we get $(x \circ y) + 2 \dot - 2 = x \circ y$.
  Setting $x = y = z = 1$, definition \ref{eq3588} isn't satisfied.
\end{proof}
